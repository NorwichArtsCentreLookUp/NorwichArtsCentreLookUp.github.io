<!DOCTYPE html>
<html>
<head>
  <title>Norwich Arts Centre - Look Up</title>
 
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
 
  <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" />
  <script src="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src='https://api.tiles.mapbox.com/mapbox.js/v1.6.4/mapbox.js'></script>
  <link href='https://api.tiles.mapbox.com/mapbox.js/v1.6.4/mapbox.css' rel='stylesheet' />
  <script src='http://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.2.0/leaflet-omnivore.min.js'></script>
  <script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.24.0/L.Control.Locate.js'></script>
  <script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-zoomslider/v0.7.0/L.Control.Zoomslider.js'></script>
  <link href='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-zoomslider/v0.7.0/L.Control.Zoomslider.css' rel='stylesheet' />
  <link href='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.24.0/L.Control.Locate.css' rel='stylesheet' />
<!--[if lt IE 9]>
  <link href='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.21.0/L.Control.Locate.ie.css' rel='stylesheet' />
<![endif]-->
     <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/main.css" rel="stylesheet">
    <link href="css/font-awesome.min.css" rel="stylesheet">


<style>
  body { padding:0; }
  #map { position:absolute; top:0; bottom:0; width:100%; }
</style>
</head>
<body>
  <div id="map"></div>
 
    <div class="footer">
      <div class="container">
        <div class="hidden-xs hidden-sm">
          <p class="text-muted">
            Look Up Trail exhibition and map, 27 June - 1 August 2014.
            // <a href="help">Help</a> 
            // <a href="info">Info</a> 
            // <a href="help">Submit a photo or sound</a> 
            // <a href="https://github.com/NorwichArtsCentreLookUp/NorwichArtsCentreLookUp.github.io">See the code</a>
            <br>
            Developed by <a href="http://norwichartscentre.co.uk/">Norwich Arts Centre</a> 
            and artist <a href="http://www.rachelrayns.com/">Rachel Rayns</a> 
            as part of <a href="http://www.ynaf.org.uk" target="_blank">Young Norfolk Arts Festival</a> 
            and <a href="http://www.norwich.gov.uk/Events/Pages/OutdoorEvents2014.aspx" target="_blank">Lord Mayor Celebration's</a>.
          </p>
        </div>

        <div class="hidden-md hidden-lg">
          <p class="text-muted text-right">
            <a href="intro">help</a> 
            // <a href="help">submit</a> 
            // <a href="http://norwichartscentre.co.uk/">norwich arts centre</a>
          </p>

        </div>
      </div>
    </div>


  <script>



    var map = L.mapbox.map('map', 'ncalookup.ik6hk0lb')
    .setView([52.63, 1.296], 16);
    L.control.locate().addTo(map);
    L.control.zoomslider().addTo(map);
    map.featureLayer.on('click', function(e) {
      map.panTo(e.layer.getLatLng());
    }); 

    // Geotagging Code
    var flickrSet = '72157645165498143',
      apiKey = '6240841f19c9a6efe0905cd6d18daa6f',
      photosUrl = 'https://api.flickr.com/services/rest/?method=flickr.photosets.getPhotos&api_key=' + apiKey + '&photoset_id=' + flickrSet +'&extras=geo,url_s,description&format=json';
 
    $( document ).ready(function() {
      $.getJSON( photosUrl + '&jsoncallback=?', function(data) {
        // console.log( data );
        var viewSet = false;
        
        $.each(data.photoset.photo, function(i,photo) {
          if ( photo.latitude == 0 )
            return;
          var latLng = new L.latLng( photo.latitude, photo.longitude ),
            icon = new L.icon({ iconUrl: "assets/logo.png" }),
            marker = L.marker( latLng, { icon: icon } );
            marker.addTo( map ).bindPopup(
              "<img src=\"" + photo.url_s + "\">" +
              "<h3>" + photo.title + "</h3>" + photo.description._content
            );
        });
      });
    });
 
  </script>
</body>
</html>